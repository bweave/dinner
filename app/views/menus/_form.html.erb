<div class="d-flex justify-content-center">
  <%= form_with(model: menu) do |form| %>
    <% if menu.errors.any? %>
      <div style="color: red">
        <h2><%= pluralize(menu.errors.count, "error") %> prohibited this menu from being saved:</h2>

        <ul>
          <% menu.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="mb-3">
      <%= form.label :starts_at, "Week of", class: "form-label" %>
      <%= form.date_field :starts_at, class: "form-control" %>
    </div>

    <div id="recipes" class="row mb-3">
      <%= form.fields_for :dinner_menus do |dmf| %>
        <%= dmf.fields_for :recipe do |recipe_fields| %>
          <div class="col">
            <%= render recipe_fields.object %>
          </div>
        <% end %>
      <% end %>
    </div>

    <div class="d-flex justify-content-between align-items-baseline">
      <div>
        <%= form.submit nil, class: "btn btn-primary me-3" %>
        <% if menu.new_record? %>
          <%= link_to "Shuffle", new_menu_path, class: "btn btn-outline-success" %>
        <% end %>
      </div>
      <%= link_to "Cancel", menus_path, class: "btn btn-outline-danger" %>
    </div>
  <% end %>
</div>
